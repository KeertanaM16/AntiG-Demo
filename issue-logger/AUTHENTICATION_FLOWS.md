# Authentication Flow Diagrams

## ğŸ” Registration Flow

```
User Browser                  Frontend                    Backend                  Database
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â”€â”€â”€â”€ Fill Register Form â”€â”€â”€â–¶                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â”€â”€â”€ POST /api/auth/      â”‚                         â”‚
     â”‚                           â”‚    register              â”‚                         â”‚
     â”‚                           â”‚    {email, password} â”€â”€â”€â”€â–¶                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Check if email â”€â”€â”€â”€â–¶â”‚
     â”‚                           â”‚                          â”‚    exists               â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Email unique â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Hash password â”€â”€â”€â–¶ bcrypt
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Hashed pwd â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ INSERT user â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ User created â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â—€â”€â”€â”€ 201 Created â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
     â”‚                           â”‚    {user details}        â”‚                         â”‚
     â”‚â—€â”€â”€â”€ "Registration         â”‚                          â”‚                         â”‚
     â”‚     Successful!" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”“ Login Flow

```
User Browser                  Frontend                    Backend                  Database
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â”€â”€â”€â”€ Enter Credentials â”€â”€â”€â”€â–¶                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â”€â”€â”€ POST /api/auth/      â”‚                         â”‚
     â”‚                           â”‚    login                 â”‚                         â”‚
     â”‚                           â”‚    {email, password} â”€â”€â”€â”€â–¶                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ SELECT user â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ User data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Compare password â”€â”€â–¶ bcrypt
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Match â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Generate Access â”€â”€â”€â–¶ JWT
     â”‚                           â”‚                          â”‚    Token (15 min)       â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Generate Refresh â”€â”€â–¶ JWT
     â”‚                           â”‚                          â”‚    Token (7 days)       â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ STORE refresh â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                           â”‚                          â”‚    token                â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Stored â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â—€â”€â”€â”€ 200 OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
     â”‚                           â”‚    {accessToken,         â”‚                         â”‚
     â”‚                           â”‚     refreshToken, user}  â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â—€â”€â”€â”€ Store tokens in â”€â”€â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â”‚     localStorage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â—€â”€â”€â”€ Redirect to app â”€â”€â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Create Issue Flow (Protected)

```
User Browser                  Frontend                    Backend                  Database
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â”€â”€â”€â”€ Submit Issue Form â”€â”€â”€â”€â–¶                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â”€â”€â”€ POST /api/issues     â”‚                         â”‚
     â”‚                           â”‚    Authorization:        â”‚                         â”‚
     â”‚                           â”‚    Bearer <accessToken>  â”‚                         â”‚
     â”‚                           â”‚    {issue_text} â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Verify JWT Token â”€â”€â–¶ JWT
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Decoded {userId, â”€â”‚
     â”‚                           â”‚                          â”‚     email, role}       â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ INSERT issue â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                           â”‚                          â”‚    (issue_text,         â”‚
     â”‚                           â”‚                          â”‚     user_id)            â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Issue created â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â—€â”€â”€â”€ 201 Created â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
     â”‚                           â”‚    {issue data}          â”‚                         â”‚
     â”‚â—€â”€â”€â”€ "Issue Created!" â”€â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â—€â”€â”€â”€ Refresh issue list â”€â”€â”€â”‚                          â”‚                         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœï¸ Update Issue Flow (Ownership Check)

```
User Browser                  Frontend                    Backend                  Database
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â”€â”€â”€â”€ Click Edit Issue â”€â”€â”€â”€â”€â–¶                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â”€â”€â”€ PUT /api/issues/:id  â”‚                         â”‚
     â”‚                           â”‚    Authorization:        â”‚                         â”‚
     â”‚                           â”‚    Bearer <accessToken>  â”‚                         â”‚
     â”‚                           â”‚    {issue_text} â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Verify JWT Token â”€â”€â–¶ JWT
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ {userId, role} â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ SELECT issue â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ {user_id: X} â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Check: userId == X  â”‚
     â”‚                           â”‚                          â”‚    OR role == 'admin'   â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚    IF NOT OWNER/ADMIN:   â”‚                         â”‚
     â”‚                           â”‚â—€â”€â”€â”€ 403 Forbidden â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
     â”‚â—€â”€â”€â”€ Error Message â”€â”€â”€â”€â”€â”€â”€â”€â”‚    "Cannot edit others'  â”‚                         â”‚
     â”‚                           â”‚     issues"              â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚    IF OWNER/ADMIN:       â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ UPDATE issue â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Updated â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚â—€â”€â”€â”€ 200 OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
     â”‚â—€â”€â”€â”€ "Issue Updated!" â”€â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Token Refresh Flow

```
User Browser                  Frontend                    Backend                  Database
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â”€â”€â”€â”€ API Request â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â”€â”€â”€ POST /api/issues     â”‚                         â”‚
     â”‚                           â”‚    Authorization:        â”‚                         â”‚
     â”‚                           â”‚    Bearer <accessToken>  â”‚                         â”‚
     â”‚                           â”‚    (EXPIRED) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Verify JWT â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ JWT
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Token Expired â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â—€â”€â”€â”€ 401 Unauthorized â”€â”€â”€â”€â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â”€â”€â”€ POST /api/auth/      â”‚                         â”‚
     â”‚                           â”‚    refresh               â”‚                         â”‚
     â”‚                           â”‚    {refreshToken} â”€â”€â”€â”€â”€â”€â”€â–¶                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Verify refresh â”€â”€â”€â”€â–¶ JWT
     â”‚                           â”‚                          â”‚    token                â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Valid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ CHECK token in â”€â”€â”€â”€â–¶â”‚
     â”‚                           â”‚                          â”‚    database             â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Found & valid â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ Generate new â”€â”€â”€â”€â”€â”€â–¶ JWT
     â”‚                           â”‚                          â”‚    access token         â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ New token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â—€â”€â”€â”€ 200 OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
     â”‚                           â”‚    {accessToken}         â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â—€â”€â”€â”€ Update token in â”€â”€â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â”‚     localStorage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â”€â”€â”€ RETRY original â”€â”€â”€â”€â”€â”€â”€â–¶                         â”‚
     â”‚                           â”‚    request with new      â”‚                         â”‚
     â”‚                           â”‚    token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                         â”‚
     â”‚                           â”‚â—€â”€â”€â”€ 200 OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
     â”‚â—€â”€â”€â”€ Success! â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸšª Logout Flow

```
User Browser                  Frontend                    Backend                  Database
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â”€â”€â”€â”€ Click Logout â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â”€â”€â”€ POST /api/auth/      â”‚                         â”‚
     â”‚                           â”‚    logout                â”‚                         â”‚
     â”‚                           â”‚    Authorization:        â”‚                         â”‚
     â”‚                           â”‚    Bearer <accessToken>  â”‚                         â”‚
     â”‚                           â”‚    {refreshToken} â”€â”€â”€â”€â”€â”€â”€â–¶                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚â”€â”€â”€ DELETE refresh â”€â”€â”€â”€â–¶â”‚
     â”‚                           â”‚                          â”‚    token from DB        â”‚
     â”‚                           â”‚                          â”‚â—€â”€â”€â”€ Deleted â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚                           â”‚â—€â”€â”€â”€ 200 OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
     â”‚                           â”‚    Clear cookies         â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â—€â”€â”€â”€ Clear localStorage â”€â”€â”€â”‚                          â”‚                         â”‚
     â”‚     (tokens removed) â”€â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â”‚                           â”‚                          â”‚                         â”‚
     â”‚â—€â”€â”€â”€ Redirect to login â”€â”€â”€â”€â”‚                          â”‚                         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ­ Role-Based Access Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User Roles                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ‘¤ REGULAR USER                    ğŸ‘‘ ADMIN USER              â”‚
â”‚                                                                 â”‚
â”‚  âœ… View all issues                 âœ… View all issues         â”‚
â”‚  âœ… Create issues                   âœ… Create issues           â”‚
â”‚  âœ… Edit OWN issues                 âœ… Edit ANY issue          â”‚
â”‚  âœ… Delete OWN issues               âœ… Delete ANY issue        â”‚
â”‚  âŒ Edit others' issues             âœ… Edit others' issues     â”‚
â”‚  âŒ Delete others' issues           âœ… Delete others' issues   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example Scenario:

Issue #1 - Created by User A (ID: 1)
â”œâ”€ User A (owner) â†’ âœ… Can edit/delete
â”œâ”€ User B         â†’ âŒ Cannot edit/delete (403 Forbidden)
â””â”€ Admin          â†’ âœ… Can edit/delete (Admin override)
```

## ğŸ” Token Lifecycle

```
TIME â†’

Registration/Login
    â”‚
    â”œâ”€â”€â”€ Generate Access Token (15 min)
    â”‚    â””â”€â”€â”€ Stored in localStorage
    â”‚
    â””â”€â”€â”€ Generate Refresh Token (7 days)
         â””â”€â”€â”€ Stored in localStorage + Database

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

After 15 minutes:
    â”‚
    Access Token EXPIRES
    â”‚
    â”œâ”€â”€â”€ User makes API request
    â”‚
    â”œâ”€â”€â”€ Backend returns 401
    â”‚
    â”œâ”€â”€â”€ Frontend AUTO uses Refresh Token
    â”‚
    â”œâ”€â”€â”€ Backend validates Refresh Token
    â”‚
    â”œâ”€â”€â”€ New Access Token generated
    â”‚
    â””â”€â”€â”€ Request retried with new token
         â””â”€â”€â”€ âœ… Success!

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

After 7 days:
    â”‚
    Refresh Token EXPIRES
    â”‚
    â”œâ”€â”€â”€ User makes API request
    â”‚
    â”œâ”€â”€â”€ Access Token expired â†’ tries refresh
    â”‚
    â”œâ”€â”€â”€ Refresh Token also expired
    â”‚
    â””â”€â”€â”€ User logged out â†’ Redirect to login

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Logout (any time):
    â”‚
    â”œâ”€â”€â”€ Refresh Token deleted from DB
    â”‚
    â”œâ”€â”€â”€ Tokens cleared from localStorage
    â”‚
    â””â”€â”€â”€ User redirected to login
```

## ğŸ“Š Database Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         USERS               â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)                     â”‚
â”‚ email (UNIQUE)              â”‚
â”‚ password (hashed)           â”‚
â”‚ full_name                   â”‚
â”‚ role (user/admin)           â”‚
â”‚ created_at                  â”‚
â”‚ updated_at                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 1:N
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    â”‚                      â”‚
    â”‚                    â”‚                      â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ REFRESH_TOKENS   â”‚ â”‚   ISSUE_LOGS       â”‚    â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚
â”‚ id (PK)          â”‚ â”‚ id (PK)            â”‚    â”‚
â”‚ user_id (FK) â”€â”€â”€â”€â”˜ â”‚ issue_text         â”‚    â”‚
â”‚ token            â”‚ â”‚ user_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ expires_at       â”‚ â”‚ created_at         â”‚
â”‚ created_at       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Relationships:
- One user can have multiple refresh tokens
- One user can create multiple issues
- Issues can exist without a user (user_id NULL if user deleted)
```

---

These diagrams show the complete authentication flow from user interaction through to database operations!
